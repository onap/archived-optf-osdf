version: 1
disable_existing_loggers: True

loggers:
  error:
    handlers: [error_handler]
    level: "WARN"
    propagate: True
  debug:
    handlers: [debug_handler]
    level: "DEBUG"
    propagate: True
  metrics:
    handlers: [metrics_handler]
    level: "INFO"
    propagate: True
  audit:
    handlers: [audit_handler]
    level: "INFO"
    propagate: True
handlers:
  debug_handler:
    level: "DEBUG"
    class: "logging.handlers.TimedRotatingFileHandler"
    filename: "logs/debug.log"
    formatter: "debugFormat"
    when: midnight
    interval: 1
    utc: True
    delay: False
    backupCount: 10
  error_handler:
    level: "WARN"
    class: "logging.handlers.TimedRotatingFileHandler"
    filename: "logs/error.log"
    formatter: "errorFormat"
    when: midnight
    interval: 1
    utc: True
    delay: False
    backupCount: 10
  metrics_handler:
    level: "INFO"
    class: "logging.handlers.TimedRotatingFileHandler"
    filename: "logs/metrics.log"
    formatter: "metricsFormat"
    when: midnight
    interval: 1
    utc: True
    delay: False
    backupCount: 10
  audit_handler:
    level: "INFO"
    class: "logging.handlers.TimedRotatingFileHandler"
    filename: "logs/audit.log"
    formatter: "auditFormat"
    when: midnight
    interval: 1
    utc: True
    delay: False
    backupCount: 10
formatters:
  standard:
    format: "%(asctime)s|||||%(name)s||%(thread)||%(funcName)s||%(levelname)s||%(message)s"
  debugFormat:
    format: "%(asctime)s|||||%(name)s||%(thread)s||%(funcName)s||%(levelname)s||%(message)s||||%(mdc)s"
    mdcfmt: "{requestID} {threadID} {serverName} {serviceName} {instanceUUID} {upperLogLevel} {severity} {serverIPAddress} {server} {IPAddress} {className} {timer} {detailMessage}"
    datefmt: "%Y-%m-%d %H:%M:%S"
    (): onaplogging.mdcformatter.MDCFormatter
  errorFormat:
    format: "%(asctime)s|||||%(name)s||%(thread)s||%(funcName)s||%(levelname)s||%(message)s||||%(mdc)s"
    mdcfmt: "{requestID} {threadID} {serviceName} {partnerName} {targetEntity} {targetServiceName} {errorCode} {errorDescription} {detailMessage}"
    datefmt: "%Y-%m-%d %H:%M:%S"
    (): onaplogging.mdcformatter.MDCFormatter
  auditFormat:
    format: "%(asctime)s|||||%(name)s||%(thread)s||%(funcName)s||%(levelname)s||%(message)s||||%(mdc)s"
    mdcfmt: "{requestID} {serviceInstanceID} {threadID} {serverName} {serviceName} {partnerName} {statusCode} {responseCode} {responseDescription} {instanceUUID} {upperLogLevel} {severity} \
             {serverIPAddress} {timer} {server} {IPAddress} {className} {unused} {processKey} {customField1} {customField2} {customField3} {customField4} {detailMessage}"
    datefmt: "%Y-%m-%d %H:%M:%S"
    (): onaplogging.mdcformatter.MDCFormatter
  metricsFormat:
    format: "%(asctime)s|||||%(name)s||%(thread)s||%(funcName)s||%(levelname)s||%(message)s||||%(mdc)s"
    mdcfmt: "{requestID} {serviceInstanceID} {threadID} {serverName} {serviceName} {partnerName} \
             {targetEntity} {targetServiceName} {statusCode} {responseCode} {responseDescription} \
             {instanceUUID} {upperLogLevel} {severity} {serverIPAddress} {timer} {server} {IPAddress} \
             {className} {unused} {processKey} {targetVirtualEntity} {customField1} {customField2} \
             {customField3} {customField4} {detailMessage}"
    datefmt: "%Y-%m-%d %H:%M:%S"
    (): onaplogging.mdcformatter.MDCFormatter

  mdcFormat:
    format: "%(asctime)s|||||%(name)s||%(thread)s||%(funcName)s||%(levelname)s||%(message)s||||%(mdc)s"
    mdcfmt: "{requestID} {invocationID} {serviceName} {serviceIP}"
    datefmt: "%Y-%m-%d %H:%M:%S"
    (): onaplogging.mdcformatter.MDCFormatter
